var _0x1db9=['writeValue','>\x20Found\x20uart\x20writing\x20characteristic','warn','main_canvas','button_play_again','length','getUTCDate','decode','bind','position','getPrimaryService','event','326156WUbzWH','>\x20Event\x20initialized','getUTCMinutes','86070Afngvm','pause','byteLength','left','innerWidth','txt_duration','<p\x20class=\x27hud\x27><span\x20id=\x27txt_heart_count\x27>000000</span></p>','<p\x20class=\x27score\x27><span\x20id=\x27txt_score\x27>000000</span></p>','requestDevice','getUTCFullYear','26WDdMOx','keyCode','name','clientWidth','__proto__','>\x20Device\x20request\x20error:\x20','1cgYDvF','wait|','getElementById','top','>\x20Found\x20client\x20event\x20characteristic','addEventListener','concat','trace','bg_frame_intro','0.6','link_about','getUTCMonth','\x20disconnected...','then','<p\x20id=\x22text44\x22><a\x20id=\x22link_about\x22\x20href=\x22about\x22>About</a></p>','apply','getUTCHours','<img\x20src=\x22assets/images/button_start.png\x22\x20alt=\x22\x22\x20onmouseover=\x22onButtonStartHover()\x22\x20onmouseout=\x22onButtonStartMouseOut()\x22/>','exception','txt_score','innerHeight','body','fixed','txt_heart_count','error','style','biotob_music_b','catch','sprite_bernie','innerHTML','2NSFReb','126779PXclhZ','>\x20Error\x20initializing\x20event:\x20','characteristicvaluechanged','clientHeight','value','gatt','documentElement','zIndex','target','<p\x20id=\x27text44\x27><a\x20id=\x27link_about\x27\x20href=\x27about\x27>About</a></p>','ready','push','toString','play','5Nxsopt','button_start','console','>\x20\x22','180189DHvurZ','1.0','bg_frame_end','shift','<p\x20class=\x27hud\x27><span\x20id=\x27txt_game_timer\x27>2021</span></p>','ok~','>\x20Time\x20now\x20in\x20UTC\x20=\x20','biotob_music_a','opacity','getCharacteristic','196977weoPqx','startNotifications','<div\x20id=\x27bg_frame\x27\x20class=\x27image\x27><img\x20src=\x27assets/images/bg_frame_play.png\x27\x20alt=\x27\x27\x20/></div>','6075PuXIgR','\x22\x20bluetooth\x20device\x20found','bluetooth','gattserverdisconnected','{}.constructor(\x22return\x20this\x22)(\x20)','<p\x20class=\x27score\x27><span\x20id=\x27txt_duration\x27>00:00:00</span></p>','79971dUxocu','log','>\x20Connecting\x20to\x20bluetooth\x20device:\x20'];var _0x2540=function(_0x2735d4,_0xa527cb){_0x2735d4=_0x2735d4-0xd1;var _0x69b50a=_0x1db9[_0x2735d4];return _0x69b50a;};var _0x5b32fe=_0x2540;(function(_0x47d054,_0x382c31){var _0x4c739e=_0x2540;while(!![]){try{var _0x1987ff=-parseInt(_0x4c739e(0xea))*-parseInt(_0x4c739e(0xd3))+-parseInt(_0x4c739e(0x12b))+-parseInt(_0x4c739e(0xd7))+-parseInt(_0x4c739e(0xe1))+parseInt(_0x4c739e(0x12a))*-parseInt(_0x4c739e(0xfc))+parseInt(_0x4c739e(0xf9))*parseInt(_0x4c739e(0x10c))+parseInt(_0x4c739e(0xe4))*parseInt(_0x4c739e(0x106));if(_0x1987ff===_0x382c31)break;else _0x47d054['push'](_0x47d054['shift']());}catch(_0x4f4b81){_0x47d054['push'](_0x47d054['shift']());}}}(_0x1db9,0x32c04));var _0x5268b9=function(){var _0x15086a=!![];return function(_0x4b3146,_0x3a2bb6){var _0x446eef=_0x15086a?function(){var _0x56adc7=_0x2540;if(_0x3a2bb6){var _0x580076=_0x3a2bb6[_0x56adc7(0x11b)](_0x4b3146,arguments);return _0x3a2bb6=null,_0x580076;}}:function(){};return _0x15086a=![],_0x446eef;};}(),_0x5306dd=_0x5268b9(this,function(){var _0x5968dd=_0x2540,_0x603fa0=function(){var _0x327387=_0x2540,_0x302931;try{_0x302931=Function('return\x20(function()\x20'+_0x327387(0xe8)+');')();}catch(_0x37f73a){_0x302931=window;}return _0x302931;},_0x43559d=_0x603fa0(),_0x4a9ba7=_0x43559d[_0x5968dd(0xd5)]=_0x43559d['console']||{},_0x472b44=[_0x5968dd(0xeb),_0x5968dd(0xef),'info',_0x5968dd(0x124),_0x5968dd(0x11e),'table',_0x5968dd(0x113)];for(var _0x1a6c3b=0x0;_0x1a6c3b<_0x472b44['length'];_0x1a6c3b++){var _0x92d338=_0x5268b9['constructor']['prototype'][_0x5968dd(0xf5)](_0x5268b9),_0x4a5636=_0x472b44[_0x1a6c3b],_0x13e458=_0x4a9ba7[_0x4a5636]||_0x92d338;_0x92d338[_0x5968dd(0x10a)]=_0x5268b9[_0x5968dd(0xf5)](_0x5268b9),_0x92d338[_0x5968dd(0xd1)]=_0x13e458[_0x5968dd(0xd1)]['bind'](_0x13e458),_0x4a9ba7[_0x4a5636]=_0x92d338;}});_0x5306dd();'use strict';const GAME_STATE_INTRO=0x0,GAME_STATE_PLAY=0x1,GAME_STATE_END=0x2,Z_INDEX_BACKGROUND=-0x1,Z_INDEX_PLAYER=-0x1,Z_INDEX_SPRITE=0x1,Z_INDEX_GAME_FRAME=0x2,Z_INDEX_UI=0x3,CANVAS_WIDTH=0x1e0,CANVAS_HEIGHT=0x2d0,BUTTON_START_WIDTH=0xc8,BUTTON_START_HEIGHT=0x48,BUTTON_PLAY_AGAIN_WIDTH=0x17c,BUTTON_PLAY_AGAIN_HEIGHT=0x48,CHAR_WIDTH=0x18,LINK_ABOUT_WIDTH=0x42,TITLE_REL_X=0x62,TITLE_REL_Y=0x78,TXT_COLLECT_REL_X=0x64,TXT_COLLECT_REL_Y=0xf0,TXT_AVOID_REL_X=0x64,TXT_AVOID_REL_Y=0x140,BUTTON_START_REL_Y=0x1e0,BUTTON_PLAY_AGAIN_REL_Y=0x1e0,HEART_COUNT_X=0xe4,HEART_COUNT_Y=0x22,GAME_TIMER_X=0xe4,GAME_TIMER_Y=0x68,SCORE_X=0xe4,SCORE_Y=0xdc,TIME_X=0xe4,TIME_Y=0x14c,BERNIE_MOVE_X=0x14,BERNIE_WIDTH=0x54,BERNIE_HEIGHT=0xb4,KEY_LEFT_ARROW='37',KEY_RIGHT_ARROW='39';var game_state=GAME_STATE_INTRO,sprite_bernie_x=0xc8,sprite_bernie_y=0x224;$(document)[_0x5b32fe(0x135)](init),document['onkeydown']=checkKey;function init(){positionElements(),game_state=GAME_STATE_INTRO;}function positionElements(){if(game_state==GAME_STATE_INTRO)positionElements_Intro();else{if(game_state==GAME_STATE_PLAY)positionElements_Play();else game_state==GAME_STATE_END&&positionElements_End();}}function positionElements_Intro(){var _0x4427b8=_0x5b32fe,_0x38f9ac=document[_0x4427b8(0x10e)](_0x4427b8(0x114));_0x38f9ac!=null&&(_0x38f9ac[_0x4427b8(0x125)]['position']='fixed',_0x38f9ac[_0x4427b8(0x125)][_0x4427b8(0xff)]=(getWindowWidth()-CANVAS_WIDTH)/0x2+'px',_0x38f9ac[_0x4427b8(0x125)][_0x4427b8(0x10f)]=(getWindowHeight()-CANVAS_HEIGHT)/0x2+'px',_0x38f9ac[_0x4427b8(0x125)]['zIndex']=Z_INDEX_BACKGROUND);var _0x420fa6=document['getElementById'](_0x4427b8(0xd4));_0x420fa6!=null&&(_0x420fa6[_0x4427b8(0x125)][_0x4427b8(0xf6)]=_0x4427b8(0x122),_0x420fa6[_0x4427b8(0x125)]['left']=(getWindowWidth()-BUTTON_START_WIDTH)/0x2+'px',_0x420fa6['style']['top']=getBaseY()+BUTTON_START_REL_Y+'px',_0x420fa6[_0x4427b8(0x125)][_0x4427b8(0x132)]=Z_INDEX_UI);var _0xaf101=document[_0x4427b8(0x10e)](_0x4427b8(0x116));_0xaf101!=null&&(_0xaf101[_0x4427b8(0x125)][_0x4427b8(0xf6)]='fixed',_0xaf101[_0x4427b8(0x125)]['left']=(getWindowWidth()-LINK_ABOUT_WIDTH)/0x2+'px',_0xaf101[_0x4427b8(0x125)][_0x4427b8(0x10f)]=(getWindowHeight()+CANVAS_HEIGHT)/0x2+'px',_0xaf101[_0x4427b8(0x125)][_0x4427b8(0x132)]=Z_INDEX_BACKGROUND);}function positionElements_Play(){var _0x20d865=_0x5b32fe,_0x1345cb=document['getElementById']('bg_frame');_0x1345cb!=null&&(_0x1345cb[_0x20d865(0x125)][_0x20d865(0xf6)]='fixed',_0x1345cb[_0x20d865(0x125)][_0x20d865(0xff)]=(getWindowWidth()-CANVAS_WIDTH)/0x2+'px',_0x1345cb[_0x20d865(0x125)][_0x20d865(0x10f)]=(getWindowHeight()-CANVAS_HEIGHT)/0x2+'px',_0x1345cb[_0x20d865(0x125)][_0x20d865(0x132)]=Z_INDEX_GAME_FRAME);var _0x269b12=document[_0x20d865(0x10e)](_0x20d865(0x128));_0x269b12!=null&&(_0x269b12['style']['position']=_0x20d865(0x122),_0x269b12[_0x20d865(0x125)][_0x20d865(0xff)]=getBaseX()+sprite_bernie_x+'px',_0x269b12[_0x20d865(0x125)]['top']=sprite_bernie_y+'px',_0x269b12[_0x20d865(0x125)][_0x20d865(0x132)]=Z_INDEX_PLAYER);printHeartCount(getBaseX()+HEART_COUNT_X,getBaseY()+HEART_COUNT_Y),printTimer(getBaseX()+GAME_TIMER_X,getBaseY()+GAME_TIMER_Y);var _0xb2f0f5=document[_0x20d865(0x10e)]('link_about');_0xb2f0f5!=null&&(_0xb2f0f5[_0x20d865(0x125)][_0x20d865(0xf6)]=_0x20d865(0x122),_0xb2f0f5[_0x20d865(0x125)][_0x20d865(0xff)]=(getWindowWidth()-LINK_ABOUT_WIDTH)/0x2+'px',_0xb2f0f5[_0x20d865(0x125)][_0x20d865(0x10f)]=(getWindowHeight()+CANVAS_HEIGHT)/0x2+'px',_0xb2f0f5[_0x20d865(0x125)][_0x20d865(0x132)]=Z_INDEX_BACKGROUND);}function positionElements_End(){var _0x2c181f=_0x5b32fe,_0x39ab47=document['getElementById'](_0x2c181f(0xd9));_0x39ab47!=null&&(_0x39ab47['style'][_0x2c181f(0xf6)]='fixed',_0x39ab47['style']['left']=(getWindowWidth()-CANVAS_WIDTH)/0x2+'px',_0x39ab47[_0x2c181f(0x125)][_0x2c181f(0x10f)]=(getWindowHeight()-CANVAS_HEIGHT)/0x2+'px',_0x39ab47['style']['zIndex']=Z_INDEX_BACKGROUND);printScore(getBaseX()+SCORE_X,getBaseY()+SCORE_Y),printDuration(getBaseX()+TIME_X,getBaseY()+TIME_Y);var _0x3e0292=document['getElementById'](_0x2c181f(0xf1));_0x3e0292!=null&&(_0x3e0292[_0x2c181f(0x125)][_0x2c181f(0xf6)]=_0x2c181f(0x122),_0x3e0292[_0x2c181f(0x125)][_0x2c181f(0xff)]=(getWindowWidth()-BUTTON_PLAY_AGAIN_WIDTH)/0x2+'px',_0x3e0292[_0x2c181f(0x125)]['top']=getBaseY()+BUTTON_PLAY_AGAIN_REL_Y+'px',_0x3e0292[_0x2c181f(0x125)]['zIndex']=Z_INDEX_UI);var _0x4488ff=document[_0x2c181f(0x10e)]('link_about');_0x4488ff!=null&&(_0x4488ff[_0x2c181f(0x125)][_0x2c181f(0xf6)]=_0x2c181f(0x122),_0x4488ff['style'][_0x2c181f(0xff)]=(getWindowWidth()-LINK_ABOUT_WIDTH)/0x2+'px',_0x4488ff[_0x2c181f(0x125)][_0x2c181f(0x10f)]=(getWindowHeight()+CANVAS_HEIGHT)/0x2+'px',_0x4488ff[_0x2c181f(0x125)][_0x2c181f(0x132)]=Z_INDEX_BACKGROUND);}function onWindowResize(){positionElements();}function onButtonStartHover(){var _0x2b810d=_0x5b32fe,_0x5ba371=document[_0x2b810d(0x10e)]('button_start');_0x5ba371!=null&&(_0x5ba371[_0x2b810d(0x125)][_0x2b810d(0xdf)]=_0x2b810d(0x115));}function onButtonStartMouseOut(){var _0x29fcc8=_0x5b32fe,_0x5afc01=document[_0x29fcc8(0x10e)](_0x29fcc8(0xd4));_0x5afc01!=null&&(_0x5afc01[_0x29fcc8(0x125)]['opacity']='1.0');}function onButtonPlayAgainHover(){var _0x35609f=_0x5b32fe,_0x3bf329=document['getElementById'](_0x35609f(0xf1));_0x3bf329!=null&&(_0x3bf329[_0x35609f(0x125)]['opacity']='0.6');}function onButtonPlayAgainMouseOut(){var _0x1ce57=_0x5b32fe,_0x21f8cf=document['getElementById']('button_play_again');_0x21f8cf!=null&&(_0x21f8cf[_0x1ce57(0x125)][_0x1ce57(0xdf)]=_0x1ce57(0xd8));}function clientConsoleLog(_0x50907c){console['log'](_0x50907c);}function getWindowWidth(){var _0x2ab5db=_0x5b32fe;return window[_0x2ab5db(0x100)]||document[_0x2ab5db(0x131)][_0x2ab5db(0x109)]||document[_0x2ab5db(0x121)][_0x2ab5db(0x109)];}function getWindowHeight(){var _0x4437b9=_0x5b32fe;return window[_0x4437b9(0x120)]||document[_0x4437b9(0x131)][_0x4437b9(0x12e)]||document[_0x4437b9(0x121)][_0x4437b9(0x12e)];}function getBaseX(){return(getWindowWidth()-CANVAS_WIDTH)/0x2;}function getBaseY(){return(getWindowHeight()-CANVAS_HEIGHT)/0x2;}function printScore(_0x348833,_0x38afb5){var _0x37454b=_0x5b32fe,_0x2b656d=document[_0x37454b(0x10e)](_0x37454b(0x11f));_0x2b656d!=null&&(_0x2b656d[_0x37454b(0x125)][_0x37454b(0xf6)]=_0x37454b(0x122),_0x2b656d['style'][_0x37454b(0xff)]=_0x348833+'px',_0x2b656d[_0x37454b(0x125)][_0x37454b(0x10f)]=_0x38afb5+'px',_0x2b656d[_0x37454b(0x125)][_0x37454b(0x132)]=Z_INDEX_SPRITE);}function printDuration(_0x337a7a,_0x92d74b){var _0x2d584d=_0x5b32fe,_0x2851cb=document[_0x2d584d(0x10e)](_0x2d584d(0x101));_0x2851cb!=null&&(_0x2851cb[_0x2d584d(0x125)]['position']=_0x2d584d(0x122),_0x2851cb[_0x2d584d(0x125)][_0x2d584d(0xff)]=_0x337a7a+'px',_0x2851cb[_0x2d584d(0x125)][_0x2d584d(0x10f)]=_0x92d74b+'px',_0x2851cb['style'][_0x2d584d(0x132)]=Z_INDEX_SPRITE);}function printHeartCount(_0x30f0ec,_0x4b59a8){var _0x40d724=_0x5b32fe,_0x338f46=document[_0x40d724(0x10e)](_0x40d724(0x123));_0x338f46!=null&&(_0x338f46[_0x40d724(0x125)][_0x40d724(0xf6)]='fixed',_0x338f46[_0x40d724(0x125)][_0x40d724(0xff)]=_0x30f0ec+'px',_0x338f46[_0x40d724(0x125)]['top']=_0x4b59a8+'px',_0x338f46[_0x40d724(0x125)][_0x40d724(0x132)]=Z_INDEX_UI);}function printTimer(_0x41acec,_0x2112d7){var _0x589877=_0x5b32fe,_0x16472f=document[_0x589877(0x10e)]('txt_game_timer');_0x16472f!=null&&(_0x16472f[_0x589877(0x125)]['position']='fixed',_0x16472f[_0x589877(0x125)]['left']=_0x41acec+'px',_0x16472f[_0x589877(0x125)][_0x589877(0x10f)]=_0x2112d7+'px',_0x16472f[_0x589877(0x125)][_0x589877(0x132)]=Z_INDEX_UI);}function startGame(){var _0xe4a872=_0x5b32fe,_0x1eb588=document[_0xe4a872(0x10e)](_0xe4a872(0xf0));_0x1eb588!=null&&(_0x1eb588['innerHTML']=_0xe4a872(0xe3)+_0xe4a872(0x102)+_0xe4a872(0xdb)+'<img\x20id=\x27sprite_bernie\x27\x20src=\x27assets/images/sprite_bernie.png\x27\x20alt=\x27\x27/>'+_0xe4a872(0x134),printHeartCount(getBaseX()+HEART_COUNT_X,getBaseY()+HEART_COUNT_Y),printTimer(getBaseX()+GAME_TIMER_X,getBaseY()+GAME_TIMER_Y)),game_state=GAME_STATE_PLAY,positionElements();}function endGame(){var _0x244b07=_0x5b32fe,_0x5c033d=document[_0x244b07(0x10e)](_0x244b07(0xf0));_0x5c033d!=null&&(_0x5c033d[_0x244b07(0x129)]='<div\x20id=\x27bg_frame_end\x27\x20class=\x27image\x27><img\x20src=\x27assets/images/bg_frame_end.png\x27\x20alt=\x27\x27\x20/></div>'+_0x244b07(0x103)+_0x244b07(0xe9)+'<div\x20id=\x27button_play_again\x27\x20class=\x27image\x27\x20onclick=\x27startIntro()\x27>'+'<img\x20src=\x27assets/images/button_play_again.png\x27\x20alt=\x27\x27\x20onmouseover=\x27onButtonPlayAgainHover()\x27\x20onmouseout=\x27onButtonPlayAgainMouseOut()\x27/>'+'</div>'+'<p\x20id=\x27text44\x27><a\x20id=\x27link_about\x27\x20href=\x27about\x27>About</a></p>',printScore(getBaseX()+SCORE_X,getBaseY()+SCORE_Y),printDuration(getBaseX()+TIME_X,getBaseY()+TIME_Y)),game_state=GAME_STATE_END,positionElements();}function startIntro(){var _0x2349ad=_0x5b32fe,_0x45d57f=document[_0x2349ad(0x10e)](_0x2349ad(0xf0));_0x45d57f!=null&&(_0x45d57f[_0x2349ad(0x129)]='<div\x20id=\x22bg_frame_intro\x22\x20class=\x22image\x22><img\x20src=\x22assets/images/bg_frame_intro.png\x22\x20alt=\x22\x22\x20/></div>'+'<div\x20id=\x22button_start\x22\x20class=\x22image\x22\x20onclick=\x22startGame()\x22>'+_0x2349ad(0x11d)+'</div>'+_0x2349ad(0x11a)),game_state=GAME_STATE_INTRO,positionElements();}function checkKey(_0x426a16){var _0x56a6d8=_0x5b32fe;if(game_state!=GAME_STATE_PLAY)return;_0x426a16=_0x426a16||window[_0x56a6d8(0xf8)];if(_0x426a16[_0x56a6d8(0x107)]==KEY_LEFT_ARROW||_0x426a16['keyCode']==KEY_RIGHT_ARROW){if(_0x426a16['keyCode']==KEY_LEFT_ARROW)sprite_bernie_x-=BERNIE_MOVE_X,sprite_bernie_x<0x0&&(sprite_bernie_x=0x0);else _0x426a16[_0x56a6d8(0x107)]==KEY_RIGHT_ARROW&&(sprite_bernie_x+=BERNIE_MOVE_X,sprite_bernie_x>CANVAS_WIDTH-BERNIE_WIDTH&&(sprite_bernie_x=CANVAS_WIDTH-BERNIE_WIDTH));}var _0x162a39=document[_0x56a6d8(0x10e)](_0x56a6d8(0x128));_0x162a39!=null&&(_0x162a39[_0x56a6d8(0x125)][_0x56a6d8(0xff)]=getBaseX()+sprite_bernie_x+'px');}function checkCurrentTime(){var _0x548c03=_0x5b32fe,_0x40034c=![],_0x42924f=new Date(),_0x5213b4=_0x42924f['getUTCFullYear'](),_0x4e10f8=_0x42924f[_0x548c03(0x117)]()+0x1,_0x2c2ef5=_0x42924f['getUTCDate'](),_0x4d5cd7=_0x42924f[_0x548c03(0x11c)](),_0x4fe117=_0x42924f['getUTCMinutes']();console['log'](_0x548c03(0xdd)+_0x42924f[_0x548c03(0x105)]()+',\x20'+(_0x42924f[_0x548c03(0x117)]()+0x1)+',\x20'+_0x42924f[_0x548c03(0xf3)]()+',\x20'+_0x42924f[_0x548c03(0x11c)]()+',\x20'+_0x42924f[_0x548c03(0xfb)]()+',\x20'+_0x42924f['getUTCSeconds']());if(_0x5213b4>0x7e4)_0x40034c=!![];else{if(_0x4e10f8>0x8)_0x40034c=!![];else{if(_0x2c2ef5>0x8)_0x40034c=!![];else _0x4d5cd7>=0x10&&(_0x40034c=!![]);}}return _0x40034c;}function initiateBluetoothConnection(){var _0x2ba9e7=_0x5b32fe;is_microbit_connected==![]&&(bluetooth_device==null?(requestBluetoothDevice(),music=document[_0x2ba9e7(0x10e)](_0x2ba9e7(0xde)),music_alt=document[_0x2ba9e7(0x10e)](_0x2ba9e7(0x126))):connectToBluetoothDevice(bluetooth_device));}function requestBluetoothDevice(){var _0x1bb17d=_0x5b32fe;return console['log']('>\x20Requesting\x20bluetooth\x20device...'),navigator[_0x1bb17d(0xe6)][_0x1bb17d(0x104)]({'acceptAllDevices':!![],'optionalServices':[EVENT_SERVICE_UUID,UART_SERVICE_UUID]})['then'](_0x37b917=>{var _0x350a2a=_0x1bb17d;console[_0x350a2a(0xeb)](_0x350a2a(0xd6)+_0x37b917[_0x350a2a(0x108)]+_0x350a2a(0xe5)),bluetooth_device=_0x37b917,_0x37b917[_0x350a2a(0x111)](_0x350a2a(0xe7),handleBluetoothDisconnection),connectToBluetoothDevice(_0x37b917);})[_0x1bb17d(0x127)](_0x1fa623=>{var _0x305d2e=_0x1bb17d;console[_0x305d2e(0xeb)](_0x305d2e(0x10b)+_0x1fa623);});}function connectToBluetoothDevice(_0x56fa54){var _0x133cc5=_0x5b32fe;console[_0x133cc5(0xeb)](_0x133cc5(0xec)+_0x56fa54[_0x133cc5(0x108)]),_0x56fa54[_0x133cc5(0x130)]['connect']()[_0x133cc5(0x119)](_0x427e7b=>{var _0x4723ed=_0x133cc5;return console['log']('>\x20Get\x20primary\x20GATT\x20service'),server_instance=_0x427e7b,_0x427e7b[_0x4723ed(0xf7)](EVENT_SERVICE_UUID);})[_0x133cc5(0x119)](_0xe1685c=>{var _0x214080=_0x133cc5;return console['log']('>\x20Found\x20command\x20service'),command_service=_0xe1685c,command_service[_0x214080(0xe0)](MICROBIT_EVENT_CHARACTERISTIC_UUID);})[_0x133cc5(0x119)](_0x57db70=>{var _0x3dd26d=_0x133cc5;return console[_0x3dd26d(0xeb)]('>\x20Found\x20write\x20characteristic'),write_characteristic=_0x57db70,write_characteristic[_0x3dd26d(0xe2)](),write_characteristic[_0x3dd26d(0x111)](_0x3dd26d(0x12d),handleCharacteristicValueChanged),command_service[_0x3dd26d(0xe0)](CLIENT_EVENT_CHARACTERISTIC_UUID);})[_0x133cc5(0x119)](_0x3309e2=>{var _0xb411b6=_0x133cc5;return console['log'](_0xb411b6(0x110)),write_client_evt_characteristic=_0x3309e2,command_service['getCharacteristic'](CLIENT_REQUIREMENTS_CHARACTERISTIC_UUID);})[_0x133cc5(0x119)](_0x8193ad=>{console['log']('>\x20Found\x20client\x20requirement\x20characteristic'),write_client_reqs_characteristic=_0x8193ad,initEvent();})[_0x133cc5(0x119)](_0x270007=>{var _0x444800=_0x133cc5;return server_instance[_0x444800(0xf7)](UART_SERVICE_UUID)[_0x444800(0x119)](_0x48c839=>{var _0x434ab8=_0x444800;return console[_0x434ab8(0xeb)]('>\x20Get\x20reading\x20characteristic'),_0x48c839[_0x434ab8(0xe0)](UART_TX_CHARACTERISTIC_UUID);})[_0x444800(0x119)](_0x5d64f2=>{var _0x31befd=_0x444800;_0x5d64f2[_0x31befd(0xe2)]()['then'](_0x14100e=>{var _0x4d16ed=_0x31befd;_0x5d64f2[_0x4d16ed(0x111)](_0x4d16ed(0x12d),handleMicrobitDataChanged);});})['then'](_0x931fda=>{var _0x17cc5d=_0x444800;console['log'](_0x17cc5d(0xee)),uart_rx_characteristic=_0x931fda;});})['catch'](_0x464f00=>{var _0x5d534a=_0x133cc5;console[_0x5d534a(0xeb)]('>\x20Connection\x20error:\x20'+_0x464f00);});}function handleCharacteristicValueChanged(_0xceb71c){var _0x450163=_0x5b32fe,_0x3578ba=_0xceb71c[_0x450163(0x133)][_0x450163(0x12f)],_0x2d35e5=[];for(var _0xe1455d=0x0;_0xe1455d<_0x3578ba[_0x450163(0xfe)];_0xe1455d++){_0x2d35e5['push']('0x'+('00'+_0x3578ba['getUint8'](_0xe1455d)[_0x450163(0xd1)](0x10))['slice'](-0x2));}}function handleMicrobitDataChanged(_0xf26784){var _0x2c583d=_0x5b32fe,_0x3e6dca=_0xf26784['target'][_0x2c583d(0x12f)],_0x46e499=new TextDecoder()[_0x2c583d(0xf4)](_0x3e6dca);console[_0x2c583d(0xeb)]('>\x20'+_0x46e499+'\x20button\x20clicked');if(_0x46e499=='A')checkCurrentTime()?(sendCommandToDevice(_0x2c583d(0xdc)),music[_0x2c583d(0xd2)]()):(sendCommandToDevice(_0x2c583d(0x10d)),music_alt[_0x2c583d(0xd2)]());else _0x46e499=='B'&&(music[_0x2c583d(0xfd)](),music_alt['pause']());}function initEvent(){var _0x19f83e=_0x5b32fe,_0x563b75=new Uint16Array([0x2274,0x0]);sendEvent(_0x563b75)[_0x19f83e(0x119)](()=>{var _0x1e6e20=_0x19f83e;console[_0x1e6e20(0xeb)](_0x1e6e20(0xfa));})[_0x19f83e(0x127)](_0x47398f=>{var _0x55d522=_0x19f83e;console['log'](_0x55d522(0x12c)+_0x47398f);});}function handleInitEventError(){resetVariables();}function resetVariables(){busy=![],server_instance=null,command_service=null,write_characteristic=null,write_client_evt_characteristic=null,write_client_reqs_characteristic=null,uart_rx_characteristic=null;}function sendEvent(_0x1b7dfa){var _0x3aa771=_0x5b32fe;if(write_client_reqs_characteristic){if(busy){command_queue['push'](_0x1b7dfa);return;}return busy=!![],write_client_reqs_characteristic[_0x3aa771(0xed)](_0x1b7dfa)[_0x3aa771(0x119)](()=>{var _0x1a6797=_0x3aa771;busy=![];var _0x28a24a=command_queue[_0x1a6797(0xda)]();_0x28a24a&&sendEvent(_0x28a24a);});}else return;}function handleBluetoothDisconnection(_0x3026dc){var _0x42486b=_0x5b32fe;if(bluetooth_device==null){}console[_0x42486b(0xeb)]('>\x20'+bluetooth_device[_0x42486b(0x108)]+_0x42486b(0x118));}function sendCommandToDevice(_0x150c43){var _0x27db48=_0x5b32fe,_0x20e5d8=[],_0x1b2fe7,_0xf91431=_0x150c43,_0x2addcf,_0x42ca0e;for(var _0x165088=0x0;_0x165088<_0xf91431['length'];++_0x165088){_0x42ca0e=_0xf91431['charCodeAt'](_0x165088),_0x20e5d8=_0x20e5d8[_0x27db48(0x112)]([_0x42ca0e]);}for(var _0x1cf714=0x0;_0x1cf714<_0x20e5d8[_0x27db48(0xf2)];_0x1cf714++){_0x1b2fe7=_0x20e5d8[_0x1cf714],_0x2addcf=new Uint16Array([0x2274,_0x1b2fe7]),writeCommand(_0x2addcf);}}function writeCommand(_0x9bd812){var _0x256622=_0x5b32fe;if(write_client_evt_characteristic){if(busy){command_queue[_0x256622(0x136)](_0x9bd812);return;}return busy=!![],write_client_evt_characteristic['writeValue'](_0x9bd812)['then'](()=>{var _0xbe414=_0x256622;busy=![];var _0x24b5d5=command_queue[_0xbe414(0xda)]();_0x24b5d5&&writeCommand(_0x24b5d5);});}else return;}function writeCommandToDevice(_0x42b84c){var _0x276d27=_0x5b32fe;if(uart_rx_characteristic){if(busy){command_queue[_0x276d27(0x136)](_0x42b84c);return;}return busy=!![],uart_rx_characteristic['writeValue'](_0x42b84c)['then'](()=>{var _0x49671b=_0x276d27;busy=![];var _0x2d9467=command_queue[_0x49671b(0xda)]();_0x2d9467&&writeCommandToDevice(_0x2d9467);});}else return;}